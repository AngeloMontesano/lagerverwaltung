{% extends "index.html" %}

{% block content %}
<div class="container">
    <h2 class="mb-4">ðŸ“¦ Lagerbewegungen</h2>

    <!-- =============================================
         ðŸ”¹ Barcode-Scan fÃ¼r Entnahme (Bestand reduzieren)
    ============================================= -->
    <div class="row mb-3">
        <div class="col-md-6">
            <input type="text" id="barcode_entnahme" class="form-control" placeholder="Barcode scannen..." autofocus>
        </div>
        <div class="col-md-3">
            <button id="btn_entnahme" class="btn btn-danger w-100">Bestand reduzieren</button>
        </div>
    </div>

    <!-- =============================================
         ðŸ”¹ Barcode-Scan fÃ¼r Zugang (Bestand erhÃ¶hen)
    ============================================= -->
    <div class="row mb-3">
        <div class="col-md-6">
            <input type="text" id="barcode_zugang" class="form-control" placeholder="Barcode scannen...">
        </div>
        <div class="col-md-3">
            <button id="btn_zugang" class="btn btn-success w-100">Bestand erhÃ¶hen</button>
        </div>
    </div>

    <!-- =============================================
         ðŸ”¹ Tabelle fÃ¼r Lagerbewegungen
    ============================================= -->
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-primary">
                <tr>
                    <th>PF-Artikelnummer</th>
                    <th>EAN</th>
                    <th>Artikelname</th>
                    <th>Typ</th>
                    <th>Menge</th>
                    <th>Datum</th>
                </tr>
            </thead>
            <tbody id="lagerbewegungen">
                {% for bewegung in lagerbewegungen %}
                <tr class="{% if bewegung.typ == 'Entnahme' %}table-danger{% else %}table-success{% endif %}">
                    <td>{{ bewegung.artikel.pf_artikel_id }}</td>
                    <td>{{ bewegung.artikel.ean }}</td>
                    <td>{{ bewegung.artikel.name }}</td>
                    <td>{{ bewegung.typ }}</td>
                    <td>{{ bewegung.menge }}</td>
                    <td>{{ bewegung.zeit.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- =============================================
     ðŸ”¹ JavaScript fÃ¼r Interaktionen laden
============================================= -->
<script src="/static/js/bestandsverwaltung.js"></script>

<!-- ðŸ”¹ Modal fÃ¼r Lagerbewegungs-Details -->
<div id="lagerbewegungModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Lagerbewegung Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p><strong>Artikelname:</strong> <span id="lager-artikelname"></span></p>
                <p><strong>Typ:</strong> <span id="lager-typ"></span></p>
                <p><strong>Menge:</strong> <span id="lager-menge"></span></p>
                <p><strong>Datum:</strong> <span id="lager-datum"></span></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">SchlieÃŸen</button>
            </div>
        </div>
    </div>
</div>


{% endblock %}
